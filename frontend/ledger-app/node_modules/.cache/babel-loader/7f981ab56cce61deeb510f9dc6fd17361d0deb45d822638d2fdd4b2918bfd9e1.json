{"ast":null,"code":"var _jsxFileName = \"/Users/bromodachi/Development/degica_project/frontend/ledger-app/src/routes/LedgerDetail.tsx\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport { LedgerEntry } from \"../model/LedgerEntry\";\nimport LedgerDetailTable from \"../components/LedgerDetailTable\";\nimport Button from '@mui/material/Button';\nimport { LedgerDetail } from \"../model/LedgerDetail\";\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class LedgerDetailView extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ledgerDetail: this.constLedger(),\n      already_called: false,\n      isLoading: false,\n      id: 0,\n      idsSeen: this.constIdsSeen(),\n      hasMore: false,\n      idsSeenIsEmpty: true\n    };\n  }\n  constLedger() {\n    return new LedgerDetail(0, \"USD\", new Map(), []);\n  }\n  constIdsSeen() {\n    return [];\n  }\n  async getData(id) {\n    try {\n      this.setState({\n        isLoading: true\n      });\n      axiosRetry(axios, {\n        retries: 3\n      });\n      let response = await axios.get(\"http://localhost:8080/ledger/\" + id + \"/details\");\n      const ledgerJson = response.data;\n      const data = ledgerJson.ledgerEntries.map(value => {\n        return new LedgerEntry(value.amount, value.currency, value.is_credit, value.description, value.created_at);\n      });\n      const details = ledgerJson.ledger;\n      const ledgerInfo = new LedgerDetail(details.totalAmount, details.totalAmountInCurrency, details.currencyRates, data);\n      this.setState({\n        ledgerDetail: ledgerInfo,\n        isLoading: false\n      });\n    } catch (error) {\n      alert(\"We couldn't load the invoices. Please reload the page to try again\");\n      console.error(error);\n      this.setState({\n        invoices: [],\n        isLoading: false\n      });\n    }\n  }\n  componentDidMount() {\n    const {\n      id\n    } = this.props.params;\n    if (!this.state.already_called) {\n      this.getData(id).then(r => this.setState({\n        already_called: true\n      }));\n    }\n  }\n  getTotalAmount() {\n    return \"\" + this.state.ledgerDetail.totalAmountInCurrency + '$' + this.state.ledgerDetail.totalAmount;\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Backdrop, {\n        sx: {\n          color: '#fff',\n          zIndex: theme => theme.zIndex.drawer + 1\n        },\n        open: this.state.isLoading,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"simple-header\",\n        children: \"My Ledger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"simple-entries\",\n        children: [\"Total Amount: \", this.getTotalAmount()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"simple-entries\",\n        children: [\"Total Entries: \", this.state.ledgerDetail.ledgerDetails.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        href: \"http://localhost:8080/invoices/download\",\n        children: \"Download CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(LedgerDetailTable, {\n        ledgerDetails: this.state.ledgerDetail.ledgerDetails\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"text\",\n        disabled: this.state.idsSeenIsEmpty,\n        onClick: () => {\n          this.getData(true);\n        },\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"text\",\n        disabled: !this.state.hasMore,\n        onClick: () => {\n          this.getData(false);\n        },\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","axios","axiosRetry","LedgerEntry","LedgerDetailTable","Button","LedgerDetail","Backdrop","CircularProgress","jsxDEV","_jsxDEV","LedgerDetailView","constructor","args","state","ledgerDetail","constLedger","already_called","isLoading","id","idsSeen","constIdsSeen","hasMore","idsSeenIsEmpty","Map","getData","setState","retries","response","get","ledgerJson","data","ledgerEntries","map","value","amount","currency","is_credit","description","created_at","details","ledger","ledgerInfo","totalAmount","totalAmountInCurrency","currencyRates","error","alert","console","invoices","componentDidMount","props","params","then","r","getTotalAmount","render","children","sx","color","zIndex","theme","drawer","open","fileName","_jsxFileName","lineNumber","columnNumber","className","ledgerDetails","length","variant","href","disabled","onClick"],"sources":["/Users/bromodachi/Development/degica_project/frontend/ledger-app/src/routes/LedgerDetail.tsx"],"sourcesContent":["import React, {Component} from \"react\";\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport {LedgerEntry} from \"../model/LedgerEntry\";\nimport LedgerDetailTable from \"../components/LedgerDetailTable\";\nimport Button from '@mui/material/Button';\nimport {LedgerDetail} from \"../model/LedgerDetail\";\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport {Route, Link, Routes, useParams} from 'react-router-dom';\n\n\nexport class LedgerDetailView extends Component <any, any> {\n\n    constLedger(): LedgerDetail { return new LedgerDetail(0, \"USD\", new Map(), [])}\n    constIdsSeen(): number []  { return [] }\n\n    state = {\n        ledgerDetail: this.constLedger(),\n        already_called: false,\n        isLoading: false,\n        id: 0,\n        idsSeen: this.constIdsSeen(),\n        hasMore: false,\n        idsSeenIsEmpty: true\n    }\n\n    async getData(id: any) {\n        try {\n            this.setState({\n                isLoading: true\n            });\n            axiosRetry(axios, { retries: 3});\n            let response = await axios.get(\"http://localhost:8080/ledger/\" + id + \"/details\");\n            const ledgerJson = response.data\n            const data = ledgerJson.ledgerEntries.map((value: any) => {\n                return new LedgerEntry(\n                    value.amount,\n                    value.currency,\n                    value.is_credit,\n                    value.description,\n                    value.created_at\n                );\n            });\n            const details = ledgerJson.ledger\n            const ledgerInfo = new LedgerDetail(\n                details.totalAmount,\n                details.totalAmountInCurrency,\n                details.currencyRates,\n                data\n            )\n            this.setState({\n                ledgerDetail: ledgerInfo,\n                isLoading: false\n            })\n        } catch (error) {\n            alert(\"We couldn't load the invoices. Please reload the page to try again\")\n            console.error(error)\n            this.setState({\n                invoices: [],\n                isLoading: false\n            });\n        }\n    }\n\n    componentDidMount() {\n        const { id } = this.props.params;\n        if (!this.state.already_called) {\n            this.getData(id).then(r =>\n                this.setState(\n                    {\n                        already_called: true\n                    }\n                )\n            );\n        }\n    }\n\n    getTotalAmount(): String {\n        return \"\" + this.state.ledgerDetail.totalAmountInCurrency + '$' +  this.state.ledgerDetail.totalAmount\n    }\n\n    render() {\n        return (\n\n            <div>\n                <Backdrop\n                    sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                    open={this.state.isLoading}\n                >\n                    <CircularProgress color=\"inherit\" />\n                </Backdrop>\n                <p className=\"simple-header\">My Ledger</p>\n                <p className=\"simple-entries\">Total Amount: {this.getTotalAmount()}</p>\n                <p className=\"simple-entries\">Total Entries: {this.state.ledgerDetail.ledgerDetails.length}</p>\n                <Button variant=\"contained\" href=\"http://localhost:8080/invoices/download\">Download CSV</Button>\n                <LedgerDetailTable ledgerDetails={this.state.ledgerDetail.ledgerDetails}></LedgerDetailTable>\n                <Button variant=\"text\"  disabled={this.state.idsSeenIsEmpty} onClick={() => {\n                    this.getData(true)\n                }}>Previous</Button>\n                <Button variant=\"text\"  disabled={!this.state.hasMore} onClick={() => {\n                    this.getData(false)\n                }}>Next</Button>\n            </div>\n        );\n    }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}